kotlin package com.example.audioambiance import android.content.Intent import android.os.Bundle import android.widget.ImageButton import android.widget.Toast import androidx.appcompat.app.AppCompatActivity import com.example.audioambiance.playback.AudioPlaybackService class MainActivity : AppCompatActivity() { private lateinit var playPauseButton: ImageButton private lateinit var rewindButton: ImageButton private lateinit var forwardButton: ImageButton private var isPlaying = false override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) playPauseButton = findViewById(R.id.btn_play_pause) rewindButton = findViewById(R.id.btn_rewind) forwardButton = findViewById(R.id.btn_forward) updatePlayPauseButton() playPauseButton.setOnClickListener { togglePlayback() } rewindButton.setOnClickListener { sendCommandToService("ACTION_SEEK_BACKWARD") Toast.makeText(this, "Retour 15 secondes", Toast.LENGTH_SHORT).show() } forwardButton.setOnClickListener { sendCommandToService("ACTION_SEEK_FORWARD") Toast.makeText(this, "Avance 30 secondes", Toast.LENGTH_SHORT).show() } } private fun sendCommandToService(action: String) { val serviceIntent = Intent(this, AudioPlaybackService::class.java).apply { this.action = action } startService(serviceIntent) } private fun togglePlayback() { isPlaying = !isPlaying if (isPlaying) { sendCommandToService("ACTION_PLAY") } else { sendCommandToService("ACTION_PAUSE") } updatePlayPauseButton() } private fun updatePlayPauseButton() { if (isPlaying) { // Utilisation d'icônes Android de base pour la compatibilité playPauseButton.setImageResource(android.R.drawable.ic_media_pause) } else { playPauseButton.setImageResource(android.R.drawable.ic_media_play) } } }
